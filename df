create or replace procedure total_score_250(d_code IN NUMBER)
as
v_cnt NUMBER;
NO_DATA EXCEPTION;
CURSOR c_stu IS SELECT s.student_code as code, student_name, Subject1, Subject2, subject3 FROM student_master s, student_marks sm WHERE sm.student_code = s.student_code AND dept_code = d_code;
v_total number(10);
BEGIN
  SELECT COUNT(*) INTO v_cnt FROM student_master WHERE dept_code = d_code;
  IF v_cnt = 0 THEN
      RAISE NO_DATA;
  ELSE
    for s in c_stu
    loop
      v_total:=s.Subject1+s.Subject2+s.subject3;
      if v_total >200 then
        DBMS_OUTPUT.PUT_LINE( s.student_name || ' ' || v_total );
      end if;
      UPDATE STUDENT_MARKS
        SET subject1 =subject1+1
            
        WHERE STUDENT_CODE = s.code;
        
    end loop;
  END IF;
  EXCEPTION
    WHEN NO_DATA THEN
      DBMS_OUTPUT.PUT_LINE( 'No Department code found' );
   -- WHEN NO_ROW_FOUND THEN
     -- DBMS_OUTPUT.PUT_LINE( 'No Row found in given dept code' );
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE( 'OTHERS ERRORS' );
      
    
END total_score_250;
/
show errors;
SELECT student_na
